/**
 * ptAnywhere - User friendly interface to use PT Anywhere.
 * @version v2.0.1
 * @link http://pt-anywhere.kmi.open.ac.uk
 */
if("undefined"==typeof ptAnywhereWidgets)var ptAnywhereWidgets={};if(ptAnywhereWidgets.console=function(){function e(e){this.selector=$(e),this.showingCached=!1,this.cachedCurrentCommand=null}function t(e,t){$("."+l.cCurrent,e.selector).prop("disabled",!t)}function o(e,t){var o=t.split("\n");if(o.length>1)for(var n=0;n<o.length-1;n++){if(0===n){var i=$("."+l.cPrompt,e.selector).text();"--More--"!==i.trim()&&$("."+l.cMessages,e.selector).append(i),$("."+l.cPrompt,e.selector).text("")}$("."+l.cMessages,e.selector).append(o[n]+"<br />")}$("."+l.cPrompt,e.selector).append(o[o.length-1]),c(),$("."+l.cCurrent,e.selector).focus()}function n(e){var t=$('<div class="'+l.cInteractive+'"></div>');t.append('<span class="'+l.cPrompt+'"></span><span>&nbsp;</span>'),t.append('<span class="'+l.cCurrent+'" contentEditable="true"></span>'),e.append('<div class="'+l.cMessages+'"></div>'),e.append(t),e.append('<a name="'+l.nBottom+'"></a>')}function i(e){switch(e){case 9:return"Tab";case 13:return"Enter";case 38:return"ArrowUp";case 40:return"ArrowDown";default:return null}}function a(e){$("."+l.cInteractive,e.selector).keydown(function(t){if("undefined"==typeof t.key&&(t.key=i(t.keyCode)),"Enter"==t.key||"Tab"==t.key){var o=e.getCommand();"Tab"==t.key&&(t.preventDefault(),o+="\t"),ptAnywhere.websocket.send(o),e.clearCached()}}),$("."+l.cInteractive,e.selector).keyup(function(t){if("undefined"==typeof t.key&&(t.key=i(t.keyCode)),"ArrowUp"==t.key)e.isCaching()&&!e.isShowingCached()||e.updateCached(),ptAnywhere.websocket.previous();else if("ArrowDown"==t.key)ptAnywhere.websocket.next();else{var o=e.getCommand(),n=o.slice(-1);"?"==n&&(ptAnywhere.websocket.send(o),e.clearCached())}}),$("."+l.cInteractive,e.selector).click(function(){$("."+l.cCurrent,e.selector).focus()})}function r(t){var o=new e(t);return n(o.selector),a(o),o}function s(e,t){return e.match(t+"$")==t}function c(){s(window.location.href,"#"+l.nBottom)?document.location.replace(window.location.href):document.location.replace(window.location.href+"#"+l.nBottom)}var l={cMessages:"messages",cInteractive:"interactive",cPrompt:"prompt",cCurrent:"current",nBottom:"bottom"};return e.prototype.onConnect=function(){t(this,!0)},e.prototype.getConnectionCallback=function(){var e=this;return function(){e.onConnect()}},e.prototype.onWarning=function(e){t(this,!1),$("."+l.cInteractive,this.selector).hide(),$("."+l.cMessages,this.selector).html("<p>"+e+"</p>")},e.prototype.getWarningCallback=function(){var e=this;return function(t){e.onWarning(t)}},e.prototype.onUpdate=function(e){o(this,e)},e.prototype.getUpdateCallback=function(){var e=this;return function(t){e.onUpdate(t)}},e.prototype.isShowingCached=function(){return this.showingCached},e.prototype.clearCached=function(){this.setCommand(""),this.cachedCurrentCommand=null},e.prototype.getCached=function(){return this.cachedCurrentCommand},e.prototype.isCaching=function(){return null!==this.cachedCurrentCommand},e.prototype.updateCached=function(){this.cachedCurrentCommand=this.getCommand()},e.prototype.getCommand=function(){return $("."+l.cCurrent,this.selector).text()},e.prototype.setCommand=function(e,t){null!==e?($("."+l.cCurrent,this.selector).text(e),this.showingCached=!1):"undefined"!=typeof t&&t&&this.isCaching()&&($("."+l.cCurrent,this.selector).text(this.getCached()),this.showingCached=!0)},e.prototype.onReplaceCommand=function(e,t){this.setCommand(e,t)},e.prototype.getReplaceCommandCallback=function(){var e=this;return function(t,o){e.onReplaceCommand(t,o)}},e.prototype.onUpdate=function(e){o(this,e)},{create:r}}(),"undefined"==typeof ptAnywhereWidgets)var ptAnywhereWidgets={};ptAnywhereWidgets.all=function(){function e(e){var t={sessionCreation:{fileToOpen:null,tracked:!0},commandLine:!0,backdrop:!0,backdropArea:null,dialogWrapper:"body"};for(var o in e)if("sessionCreation"==o&&e[o])for(var n in t[o])n in e[o]&&(t[o][n]=e[o][n]);else t[o]=e[o];return t}function t(e){return e.indexOf("/",this.length-1)===-1?e+"/":e}function o(e,o){var n=t(e);return s.create(n),c.create(o)}function n(e,t,n){var i=o(e,t);r.init(s.map,s.creationMenu,i,n)}function i(t,o,i,a){var r=e(a);if(s.init(t),r.sessionCreation){if(null!==r.sessionCreation.fileToOpen){s.showMessage(res.session.creating);var c=null;r.sessionCreation.tracked&&(c=l.getLast()),ptAnywhere.http.newSession(o,r.sessionCreation.fileToOpen,c,function(e){$.get(e,function(e){r.sessionCreation.tracked&&l.setLast(e),window.location.href="?session="+e})}).fail(function(e){s.showMessage(res.session.unavailable)})}}else{var d=new ptAnywhere.http.Client(o,function(){s.showMessage(res.network.notLoaded)});n(i,r,d),d.getNetwork(function(e){s.map.update(e)},function(e,t,o){var n;switch(o){case ptAnywhere.http.UNAVAILABLE:n=res.network.errorUnavailable;break;case ptAnywhere.http.TIMEOUT:n=res.network.errorTimeout;break;default:n=res.network.errorUnknown}s.map.error(n+". "+res.network.attempt+" "+e+"/"+t+".")},function(){s.showMessage(res.network.notLoaded)})}}function a(t,n,i,a){var r=e(a);s.init(t);var l=o(n,r);return s.map.update(i),{map:s.map,reset:function(){s.map.update(i)},dialogs:{creation:l[c.CREATION_DIALOG],modification:l[c.MODIFICATION_DIALOG],link:l[c.LINK_DIALOG],cmd:l[c.CMD_DIALOG]}}}var r=function(){function e(e,s,d,p){n=p,a.init(d[c.CREATION_DIALOG]),l.init(d[c.MODIFICATION_DIALOG]),r.init(d[c.LINK_DIALOG]),d.hasOwnProperty(c.CMD_DIALOG)&&i.init(d[c.CMD_DIALOG]),t(e);var u=s.getElements();for(var f in u){var m=u[f];new o($("."+m,s.getSelector()),e.getSelector(),m)}}function t(e){e.onDoubleClickDevice(function(e){i.start(e)}),e.onAddDevice(function(t,o){a.start(t,o,e.addNode)}),e.onAddLink(function(t,o){r.start(t,o,function(n,i,a){e.connect(t,o,n.id,n.url,i,a)})}),e.onEditDevice(function(t){l.start(t,function(t){e.updateNode(t)})}),e.onDeleteDevice(function(e){n.removeDevice(e)}),e.onDeleteLink(function(e){n.removeLink(e)})}function o(e,t,o){this.el=e,this.originalPosition={left:this.el.css("left"),top:this.el.css("top")},this.canvas=t,this.deviceType=o;var n=this;this.el.draggable({helper:"clone",opacity:.4,start:function(e,t){$(this).css({opacity:"0.7"})},stop:function(e,t){n.collisionsWithCanvas(t.helper)?(n.startCreatingIcon(t),n.createDevice(t.offset)):n.moveToStartingPosition()}})}var n,i=function(){function e(e){o=e}function t(e){o.setBody('<div class="iframeWrapper">   <iframe class="terminal" src="console?endpoint='+e.consoleEndpoint+'"></iframe></div>'),o.open()}var o;return{init:e,start:t}}(),a=function(){function e(e){i=e}function t(e,t,o,i,a){var r={group:t,x:o,y:i};return""!==e&&(r.label=e),n.addDevice(r).done(a)}function o(e,o,n){i.getPrimaryButton().unbind(),i.getPrimaryButton().click(function(){var a=i.getDeviceName(),r=i.getDeviceType();t(a,r,e,o,n).always(function(){i.close()})}),i.open()}var i;return{init:e,start:o}}(),r=function(){function e(e){s=e}function t(e,t){null===e||0===e.length?s.showError("One of the devices you are trying to link has no available interfaces."):(t?s.setFromPorts(e):s.setToPorts(e),c?s.showLoaded():c=!0)}function o(e,t){410===t.status?s.close():s.showError("Unable to get "+e.label+" device's ports.")}function i(e,i){c=!1,n.getAvailablePorts(e).done(function(e){t(e,!0)}).fail(function(t){o(e,t)}),n.getAvailablePorts(i).done(function(e){t(e,!1)}).fail(function(e){o(i,e)})}function a(e,t,o){r=o,s.showLoading(),s.setFromDevice(e.label),s.setToDevice(t.label),s.getPrimaryButton().hide(),s.open(),s.getPrimaryButton().unbind(),s.getPrimaryButton().click(function(){n.createLink(s.getFromPortURL(),s.getToPortURL()).done(function(e){r(e,s.getFromPortName(),s.getToPortName())}).always(function(){s.close()})}),i(e,t)}var r,s=null,c=!1;return{init:e,start:a}}(),l=function(){function e(e){c=e}function t(e){e.hasOwnProperty("portIpAddress")&&e.hasOwnProperty("portSubnetMask")?(c.setPortIpAddress(e.portIpAddress),c.setPortSubnetMask(e.portSubnetMask),c.showIFaceDetails()):c.hideIFaceDetails()}function o(e){var o=c.setPorts(e);null!==o&&(t(o),c.showLoaded()),c.getPortSelect().unbind(),c.getPortSelect().change(function(){$("option:selected",this).each(function(o,n){for(var i=$(n).text(),a=0;a<e.length;a++)if(i==e[a].portName){t(e[a]);break}})})}function i(){c.showLoading(),c.setDeviceName(s.label),s.hasOwnProperty("defaultGateway")?c.setDefaultGateway(s.defaultGateway):c.setDefaultGateway(null),n.getAllPorts(s).done(o).fail(function(){c.close()})}function a(e,t){var o=c.getSelectedTab();if(1==o){var i=c.getDeviceName(),a=c.getDefaultGateway();return n.modifyDevice(s,i,a).done(e).always(t)}if(2==o){var r=c.getSelectedPortUrl(),l=c.getPortIpAddress(),d=c.getPortSubnetMask();return n.modifyPort(r,l,d).always(t)}console.error("ERROR. Unknown selected tab: "+o+".")}function r(e,t){s=e,i(),c.getPrimaryButton().unbind(),c.getPrimaryButton().click(function(){a(t,function(){c.close()})}),c.open()}var s,c=null;return{init:e,start:r}}();return o.prototype.collisionsWithCanvas=function(e){var t=this.canvas.offset().left,o=this.canvas.offset().top,n=this.canvas.outerHeight(!0),i=this.canvas.outerWidth(!0),a=o+n,r=t+i,s=e.offset().left,c=e.offset().top,l=e.outerHeight(!0),d=e.outerWidth(!0),p=c+l,u=s+d;return!(a<c||o>p||r<s||t>u)},o.prototype.moveToStartingPosition=function(){var e=this;this.el.animate({opacity:"1"},1e3,function(){e.el.css({left:e.originalPosition.left,top:e.originalPosition.top})})},o.prototype.startCreatingIcon=function(e){var t=$('<img alt="Temporary image" src="'+e.helper.attr("src")+'">');t.css("width",e.helper.css("width"));var o=$('<div class="text-in-image"><span>Creating...</span></div>');o.prepend(t),$("body").append(o),o.css({position:"absolute",left:e.offset.left,top:e.offset.top}),this.creatingIcon=o},o.prototype.stopCreatingIcon=function(e){this.moveToStartingPosition(),this.creatingIcon.remove()},o.prototype.createDevice=function(e){var t=e.left,o=e.top,i=s.map.getCoordinate(t,o),a=this;return n.addDevice({group:this.deviceType,x:i.x,y:i.y}).done(function(e){a.stopCreatingIcon(),s.map.addNode(e)}).fail(function(e){a.stopCreatingIcon()})},{init:e,commandLine:i,deviceCreation:a,linkCreation:r,deviceModification:l}}(),s=function(){function e(e){n=$(e)}function t(e){var t=i.create(e),o=a.create(e);n.append(o),n.append(t)}function o(e){n.html('<div class="row message">  <div class="col-md-8 col-md-offset-2 text-center">    <h1>'+e.title+"</h1>"+e.content+"  </div></div>")}var n=null,i=function(){function e(e,o){return r=e,t()}function t(){var e=$("<fieldset></fieldset>");e.tooltip({title:res.creationMenu.legend});var t=$('<div class="col-md-8 col-md-offset-2 col-sm-10 col-sm-offset-1 col-xs-12"></div>'),n=$('<div class="row"></div>');for(var i in s)n.append(o(s[i],c[i]));return t.append(n),e.append(t),a=$('<div class="creation-menu"></div>'),a.append(e),a}function o(e,t){return'<figure class="col-md-3 col-sm-3 col-xs-3 text-center"><img class="'+e+'" alt="'+e+'" src="'+r+t.icon+'"><figcaption>'+t.caption+"</figcaption></figure>"}function n(){return s}function i(){return a}var a=null,r=null,s=["cloud","router","switch","pc"],c=[{icon:"cloud.png",caption:"Cloud"},{icon:"router.png",caption:"Router"},{icon:"switch.png",caption:"Switch"},{icon:"pc.png",caption:"Pc"}];return{getSelector:i,create:e,getElements:n}}(),a=function(){function e(e){return O={nodes:{physics:!1,font:"14px verdana black"},edges:{width:3,selectionWidth:1.4,color:{color:"#606060",highlight:"#000000",hover:"#000000"}},groups:{cloudDevice:{shape:"image",image:e+"cloud.png",size:50},routerDevice:{shape:"image",image:e+"router_cropped.png",size:45},switchDevice:{shape:"image",image:e+"switch_cropped.png",size:35},pcDevice:{shape:"image",image:e+"pc_cropped.png",size:45}},manipulation:{initiallyActive:!0,addNode:function(e,t){},addEdge:function(e,t){},editNode:function(e,t){},editEdge:!1,deleteNode:function(e,t){},deleteEdge:function(e,t){}},locale:"ptAnywhere",locales:{ptAnywhere:res.manipulationMenu}},M=t(e),o(),p(),M}function t(e){var t=$('<div class="network"></div>');return t.append('<div class="loading"><img class="'+E.cLoadingIcon+'" src="'+e+'loading.gif" alt="Loading network topology..." /><div style="text-align: center;"><p>'+res.network.loading+'<p><p id="'+E.idLoadingMessage+'"></p></div></div>'),t.append('<div class="map"></div>'),t}function o(){$(".loading",M).show(),$(".map",M).hide()}function n(){$(".loading",M).hide(),$(".map",M).show()}function i(){var e=x.getSelection();return 1!==e.nodes.length?(console.log("Only one device is supposed to be selected. Instead "+e.nodes.length+" are selected."),null):S.get(e.nodes[0])}function a(e){return 0===e.nodes.length&&1===e.edges.length}function r(e){return e.nodes.length>0}function s(e){return e.label.indexOf("\n")!==-1}function c(e){var t=S.get(e.from),o=S.get(e.to);s(t)||(t.label=t.label+"\n("+e.fromLabel+")",S.update(t)),s(o)||(o.label=o.label+"\n("+e.toLabel+")",S.update(o))}function l(e){var t=S.get(e.from),o=S.get(e.to);s(t)&&(t.label=t.label.split("\n")[0],S.update(t)),s(o)&&(o.label=o.label.split("\n")[0],S.update(o))}function d(e){for(var t=0;t<e.edges.length;t++)l(T.get(e.edges[t]))}function p(){if(null===x){var e={nodes:S,edges:T};x=new vis.Network($(".map",M).get(0),e,O),x.on("select",function(e){if(a(e)){var t=T.get(e.edges[0]);c(t)}else r(e)&&d(e)}),x.on("deselectEdge",function(e){a(e.previousSelection)&&d(e.previousSelection)})}}function u(){x.fit()}function f(e){n(),null!==e.devices&&(S.clear(),S.add(e.devices)),null!==e.edges&&(T.clear(),T.add(e.edges)),x.fit()}function m(e){S.add(e)}function g(e){S.remove(C(e))}function v(e){S.update(e)}function h(e,t,o,n,i,a){var r;r="string"==typeof e&&"string"==typeof t?{from:C(e).id,to:C(t).id}:{from:e.id,to:t.id},void 0!==o&&(r.id=o),void 0!==n&&(r.url=n),void 0!==i&&(r.fromLabel=i),void 0!==a&&(r.toLabel=a),T.add(r)}function b(e){var t=[C(e[0]).id,C(e[1]).id],o=T.get({filter:function(e){return e.from===t[0]&&e.to===t[1]||e.from===t[1]&&e.to===t[0]}});return 0===o.length?null:o[0]}function y(e){T.remove(b(e).id)}function w(e,t){return x.DOMtoCanvas({x:e,y:t})}function D(e){$("#"+E.idLoadingMessage,M).text(e)}function C(e){var t=S.get({filter:function(t){return t.label==e}});return 0===t.length?null:t[0]}function k(e){x.on("doubleClick",function(){var t=i();null!==t&&e(t)})}function I(e){O.manipulation.addNode=function(t,o){e(t.x,t.y)},x.setOptions(O)}function A(e){O.manipulation.addEdge=function(t,o){var n=S.get(t.from),i=S.get(t.to);e(n,i)},x.setOptions(O)}function L(e){O.manipulation.editNode=function(t,o){e(S.get(t.id)),o(t)},x.setOptions(O)}function P(e){O.manipulation.deleteNode=function(t,o){e(S.get(t.nodes[0])),o(t)},x.setOptions(O)}function N(e){O.manipulation.deleteEdge=function(t,o){var n=T.get(t.edges[0]);l(n),e(n),o(t)},x.setOptions(O)}function F(){return M}var O,S=new vis.DataSet,T=new vis.DataSet,x=null,M=null,E={cLoadingIcon:"loading-icon",idLoadingMessage:"loadingMessage"};return{getSelector:F,create:e,update:f,fit:u,addNode:m,removeNode:g,updateNode:v,connect:h,disconnect:y,getCoordinate:w,error:D,get:C,onDoubleClickDevice:k,onAddDevice:I,onAddLink:A,onEditDevice:L,onDeleteDevice:P,onDeleteLink:N}}();return{init:e,create:t,showMessage:o,creationMenu:i,map:a}}(),c=function(){function e(e){var t=$("<div></div>");$(e.dialogWrapper).append(t);var o={};return o[n]=new l.Object(t,"create-device",e.backdrop,e.backdropArea),o[i]=new p.Object(t,"modify-device",e.backdrop,e.backdropArea),o[a]=new d.Object(t,"link-devices",e.backdrop,e.backdropArea),e.commandLine&&(o[r]=new c.Object(t,e.backdrop,e.backdropArea)),o}function t(e,t,o,n,i,a,r){this.options={backdrop:a},this.bdArea=r;var c='<div class="modal fade" id="'+e+'" tabindex="-1" role="dialog" aria-labelledby="'+e+'Label">  <div class="modal-dialog" role="document">    <div class="modal-content">      <div class="modal-header">        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>        <h4 class="modal-title" id="'+e+'Label">'+o+'</h4>      </div>      <div class="modal-body">'+n.html()+'      </div>      <div class="modal-footer">        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>';i&&(c+='        <button type="button" class="btn '+s.cPrimaryBtn+'">Submit</button>'),c+="      </div>    </div>  </div></div>",t.append(c),this.selector=$("#"+e,t)}function o(e,t,o){var n=null;t.html("");for(var i=0;i<e.length;i++){var a=e[i].portName,r=e[i].url,s='<option value="'+r+'"';i==o&&(s+=" selected",n=e[i]),t.append(s+">"+a+"</option>")}return n}var n="creationDialog",i="modificationDialog",a="linkDialog",r="cmdDialog",s={cPrimaryBtn:"btn-primary"};t.prototype.open=function(){this.selector.modal(this.options),this.selector.modal("show"),this.options.backdrop&&null!==this.bdArea&&$(".modal-backdrop").appendTo(this.bdArea)},t.prototype.close=function(){this.selector.modal("hide")},t.prototype.getPrimaryButton=function(){return $("."+s.cPrimaryBtn,this.selector)};var c=function(){function e(e,t,o){this.options={backdrop:t},this.bdArea=o,this.selector=$('<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="cmdModal"></div>');var n='<div class="modal-dialog" role="document" style="height: 90%;">  <div class="modal-content" style="height: 100%;">    <div class="modal-header" style="height: 10%;">      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>      <h4 class="modal-title" id="cmdModal">'+res.commandLineDialog.title+'</h4>    </div>    <div class="modal-body" style="height: 89%;">    </div>  </div></div>';this.selector.append(n),e.append(this.selector);var i=this;this.selector.on("hidden.bs.modal",function(e){i.setBody("")})}return e.prototype.setBody=function(e){$(".modal-body",this.selector).html(e)},e.prototype.appendTo=function(e,t){$(e,this.selector).append(t)},e.prototype.open=function(){this.selector.modal(this.options),this.selector.modal("show"),this.options.backdrop&&null!==this.bdArea&&$(".modal-backdrop").appendTo(this.bdArea)},e.prototype.close=function(){this.selector.modal("hide")},{Object:e}}(),l=function(){function e(e,n,i,a){var r=$("<form></form>");r.append('<fieldset>  <div class="clearfix form-group">    <label for="'+o.nameId+'" class="col-md-3">'+res.name+': </label>    <div class="col-md-9">      <input type="text" name="'+o.nameField+'" id="'+o.nameId+'" class="form-control">    </div>  </div>  <div class="clearfix form-group">    <label for="'+o.typeId+'" class="col-md-3">'+res.creationDialog.type+': </label>    <div class="col-md-9">      <select name="'+o.typeField+'" id="'+o.typeId+'" class="form-control">        <option value="cloud" data-class="cloud">Cloud</option>        <option value="router" data-class="router">Router</option>        <option value="switch" data-class="switch">Switch</option>        <option value="pc" data-class="pc">PC</option>      </select>    </div>  </div></fieldset>'),t.call(this,n,e,res.creationDialog.title,r,!0,i,a)}var o={nameField:"name",nameId:"newDeviceName",typeField:"type",typeId:"newDeviceType"};return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.getDeviceName=function(){return $('input[name="'+o.nameField+'"]',this.selector).val().trim()},e.prototype.getDeviceType=function(){return $('select[name="'+o.typeField+'"]',this.selector).val()},{Object:e}}(),d=function(){function e(e,o,i,a){var r=$('<form name="link-devices"></form>');r.append('<div class="'+n.loading+'">'+res.loadingInfo+"</div>"),r.append('<div class="'+n.loaded+'">  <p>'+res.linkDialog.select+'</p>  <div class="clearfix form-group">    <label for="'+n.fromInterface+'" class="col-md-3 '+n.fromName+'">Device 1</label>    <div class="col-md-9">      <select class="form-control '+n.fromInterface+'" size="1">        <option value="loading">'+res.loading+'</option>       </select>    </div>  </div>  <div class="clearfix form-group">    <label for="'+n.toInterface+'" class="col-md-3 '+n.toName+'">Device 2</label>    <div class="col-md-9">      <select class="form-control '+n.toInterface+'" size="1">        <option value="loading">'+res.loading+"</option>      </select>    </div>  </div></div>"),r.append('<div class="'+n.error+'">  <p>'+res.linkDialog.error+'</p>  <p class="'+n.errorMsg+'"></p></div>'),t.call(this,o,e,res.linkDialog.title,r,!0,i,a)}var n={fromName:"fromDeviceName",toName:"toDeviceName",fromInterface:"linkFromInterface",toInterface:"linkToInterface",loading:"loading",loaded:"loaded",error:"error",errorMsg:"error-msg"};return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.setFromDevice=function(e){$("."+n.fromName,this.selector).text(e)},e.prototype.setToDevice=function(e){$("."+n.toName,this.selector).text(e)},e.prototype.getFromPortName=function(){return $("."+n.fromInterface+" option:selected",this.selector).text()},e.prototype.getToPortName=function(){return $("."+n.toInterface+" option:selected",this.selector).text()},e.prototype.getFromPortURL=function(){return $("."+n.fromInterface+" option:selected",this.selector).val()},e.prototype.getToPortURL=function(){return $("."+n.toInterface+" option:selected",this.selector).val()},e.prototype.setToPorts=function(e){o(e,$("."+n.toInterface,this.selector),null)},e.prototype.setFromPorts=function(e){o(e,$("."+n.fromInterface,this.selector),null)},e.prototype.showLoading=function(){this.showPanel(n.loading)},e.prototype.showLoaded=function(){this.showPanel(n.loaded),this.getPrimaryButton().show()},e.prototype.showError=function(e){$("."+n.error+" ."+n.errorMsg,this.selector).text(e),this.showPanel(n.error)},e.prototype.showPanel=function(e){var t=[n.loading,n.loaded,n.error];for(var o in t)t[o]===e?$("."+t[o],this.selector).show():$("."+t[o],this.selector).hide()},{Object:e}}(),p=function(){function e(e,o,i,a){var r=$("<form></form>");r.append('<ul class="nav nav-tabs" role="tablist">  <li role="presentation" class="active">     <a href="#'+n.tab1+'" aria-controls="'+n.tab1+'" role="tab" data-toggle="tab">       '+res.modificationDialog.globalSettings+'     </a>  </li>  <li role="presentation">    <a href="#'+n.tab2+'" aria-controls="'+n.tab2+'" role="tab" data-toggle="tab">      '+res.modificationDialog.interfaces+'    </a>  </li></ul><div class="tab-content">  <div id="'+n.tab1+'" role="tabpanel" class="tab-pane active">    <div class="clearfix form-group">      <label for="'+o+'-name" class="col-md-3">'+res.name+': </label>      <div class="col-md-9">        <input type="text" name="'+n.nameField+'" id="'+o+'-name" class="form-control">      </div>    </div>    <div class="clearfix form-group">      <label for="'+o+'-default-gw" class="col-md-3">'+res.modificationDialog.defaultGW+': </label>      <div class="col-md-9">        <input type="text" name="'+n.gatewayField+'" id="'+o+'-default-gw" class="form-control">      </div>    </div>  </div>  <div id="'+n.tab2+'" role="tabpanel" class="tab-pane">    <div class="'+n.cLoading+'">'+res.loadingInfo+'</div>    <div class="'+n.cLoaded+'">      <div class="clearfix form-group">        <label for="'+o+'-ifaces" class="col-md-3">'+res.name+': </label>        <div class="col-md-9">          <select name="'+n.iFaceSelector+'" id="'+o+'-ifaces"  size="1" class="form-control">            <option value="loading">'+res.loadingInfo+'</option>          </select>        </div>      </div>      <hr>      <div class="clearfix form-group '+n.cIFaceDetails+'">        <div class="clearfix form-group">          <label for="'+o+'-idaddr" class="col-md-3">'+res.modificationDialog.ipAddress+': </label>          <div class="col-md-9">            <input type="text" name="'+n.ipField+'" id="'+o+'-idaddr" class="form-control">          </div>        </div>        <div class="clearfix form-group">          <label for="'+o+'-subnet" class="col-md-3">'+res.modificationDialog.subnetMask+': </label>          <div class="col-md-9">            <input type="text" name="'+n.subnetField+'" id="'+o+'-subnet" class="form-control">          </div>        </div>      </div>    </div>    <div class="'+n.cNoIFaceDetails+'">'+res.modificationDialog.noSettings+"</div>  </div></div>"),t.call(this,o,e,res.modificationDialog.title,r,!0,i,a)}var n={tabs:"modify-dialog-tabs",tab1:"tabs-1",tab2:"tabs-2",nameField:"displayName",gatewayField:"defaultGateway",ipField:"ipAddress",subnetField:"subnetMask",iFaceSelector:"interface",cLoading:"loading",cLoaded:"loaded",cIFaceDetails:"iFaceDetails",cNoIFaceDetails:"noIFaceDetails"};return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.getSelectedTab=function(){var e=$("li.active a",this.selector).attr("aria-controls");return e==n.tab1?1:e==n.tab2?2:0},e.prototype.selectFirstTab=function(){$('.nav-tabs a[href="#'+n.tab1+'"]',this.selector).tab("show")},e.prototype.selectSecondTab=function(){$('.nav-tabs a[href="#'+n.tab2+'"]',this.selector).tab("show")},e.prototype.getDeviceName=function(){return $('input[name="'+n.nameField+'"]',this.selector).val()},e.prototype.setDeviceName=function(e){$('input[name="'+n.nameField+'"]',this.selector).val(e)},e.prototype.getDefaultGateway=function(){return $('input[name="'+n.gatewayField+'"]',this.selector).val()},e.prototype.setDefaultGateway=function(e){var t=$('input[name="'+n.gatewayField+'"]',this.selector);null===e?(t.parent().parent().hide(),t.val("")):(t.val(e),t.parent().parent().show())},e.prototype.getSelectedPortUrl=function(){return $('select[name="'+n.iFaceSelector+'"]',this.selector).val()},e.prototype.setPorts=function(e){return o(e,$('select[name="'+n.iFaceSelector+'"]',this.selector),0)},e.prototype.getPortSelect=function(){return $('select[name="'+n.iFaceSelector+'"]',this.selector)},e.prototype.showIFaceDetails=function(){$("."+n.cIFaceDetails,this.selector).show(),$("."+n.cNoIFaceDetails,this.selector).hide()},e.prototype.hideIFaceDetails=function(){$("."+n.cIFaceDetails,this.selector).hide(),$("."+n.cNoIFaceDetails,this.selector).show()},e.prototype.getPortIpAddress=function(){return $('input[name="'+n.ipField+'"]',this.selector).val()},e.prototype.setPortIpAddress=function(e){$('input[name="'+n.ipField+'"]',this.selector).val(e)},e.prototype.getPortSubnetMask=function(){return $('input[name="'+n.subnetField+'"]',this.selector).val()},e.prototype.setPortSubnetMask=function(e){$('input[name="'+n.subnetField+'"]',this.selector).val(e)},e.prototype.showLoading=function(){$("#"+n.tab2+">."+n.cLoading,this.selector).show(),$("#"+n.tab2+">."+n.cLoaded,this.selector).hide()},e.prototype.showLoaded=function(){$("#"+n.tab2+">."+n.cLoading,this.selector).hide(),$("#"+n.tab2+">."+n.cLoaded,this.selector).show()},{Object:e}}();return{create:e,CREATION_DIALOG:n,MODIFICATION_DIALOG:i,LINK_DIALOG:a,CMD_DIALOG:r}}(),l=function(){function e(){return window.localStorage.getItem("lastSession")}function t(e){window.localStorage.setItem("lastSession",e)}return{getLast:e,setLast:t}}();return{create:i,createNonInteractiveWidget:a}}();var res={loading:"Loading...",loadingInfo:"Loading info...",name:"Name",manipulationMenu:{edit:"Edit",del:"Delete selected",back:"Back",addNode:"Add Device",addEdge:"Connect Devices",editNode:"Edit Device",addDescription:"Click in an empty space to place a new device.",edgeDescription:"Click on a node and drag the edge to another element to connect them.",editEdge:"Edit Edge",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",createEdgeError:"Cannot link edges to a cluster.",deleteClusterError:"Clusters cannot be deleted.",editClusterError:"Clusters cannot be edited."},session:{creating:{title:"Creating new session...",content:""},unavailable:{title:"Unavailable PT instances",content:"<p>Sorry, there are <b>no Packet Tracer instances available</b> right now to initiate a session.</p><p>Please, wait a little bit and <b>try again</b>.</p>"}},network:{loading:"Loading network...",attempt:"Attempt",errorUnavailable:"Instance not yet available",errorTimeout:"Timeout",errorUnknown:"Unknown error",notLoaded:{title:"Topology not found",content:'<p>The topology could not be loaded probably because the session does not exist (e.g., if it has expired).</p><p><a href="?session">Click here</a> to initiate a new one.</p>'}},commandLineDialog:{title:"Command line"},linkDialog:{title:"Connect two devices",select:"Please select which ports to connect...",error:"Sorry, something went wrong during the link creation."},creationDialog:{title:"Create new device",type:"Device type"},creationMenu:{legend:"To create a new device, drag it to the network map"},modificationDialog:{title:"Modify device",globalSettings:"Global Settings",interfaces:"Interfaces",defaultGW:"Default gateway",ipAddress:"IP address",subnetMask:"Subnet mask",noSettings:"No settings can be specified for this type of interface."}};